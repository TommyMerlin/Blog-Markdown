---
title: 数据库基础2:数据库的设计
date: 2020-03-04 16:10:09
tags:
- 数据库
- MySql
categories:
- 数据库
---

## 1.多表之间的关系

### 1.1 分类

- 一对一
  - 人和身份证
- 一对多(多对一)
  - 部门和员工
- 多对多
  - 学生和课程

<!-- more -->

### 1.2 实现关系

- 一对一
  - 一对一关系实现，可以在任意一方添加唯一外键指向另一方的主键。
- 一对多(多对一)
  - **在多的一方建立外键**，指向一的一方的主键。
- 多对多
  - 多对多关系实现需要借助第三张**中间表**。中间表至少包含两个字段，这两个字段作为第三张表的外键，分别指向两张表的主键。

## 2.数据库设计的范式

### 2.1 概念

设计关系数据库时，遵从不同的规范要求，设计出合理的关系型数据库，这些不同的规范要求被称为不同的**范式**，各种范式呈递次规范，**越高的范式数据库冗余越小**。

目前关系数据库有**六种范式**：第一范式（1NF）、第二范式（2NF）、第三范式（3NF）、巴斯-科德范式（BCNF）、第四范式(4NF）和第五范式（5NF，又称完美范式）。

### 2.2 分类

- **第一范式（1NF）**：每一列都是不可分割的**原子数据项**。

<img src="https://aliyun-oss-coderhuye.oss-cn-hangzhou.aliyuncs.com/blog/2021-06-19-1NF-bed852.png" alt="1NF" width="50%" />

- **第二范式（2NF）**：在 1NF 的基础上，非码属性必须完全依赖于码（在 1NF 基础上**消除非主属性对主码的部分函数依赖**）。

<img src="https://aliyun-oss-coderhuye.oss-cn-hangzhou.aliyuncs.com/blog/2021-06-19-2NF-2cf19c.png" alt="2NF" width="50%" />

- **第三范式（3NF）**：在 2NF 基础上，任何非主属性不依赖于其它非主属性（在 2NF 基础上**消除传递依赖**）。

<img src="https://aliyun-oss-coderhuye.oss-cn-hangzhou.aliyuncs.com/blog/2021-06-19-3NF-0f76a4.png" alt="3NF" width="40%" />

**概念：**

- **函数依赖**：A-->B，如果通过 A 属性(属性组)的值，可以确定唯一 B 属性的值。则称 B 依赖于 A。
  - 学号-->姓名
  - (学号，课程名称)--> 分数
- **完全函数依赖**：A-->B， 如果A是一个属性组，则B属性值得确定需要依赖于A属性组中**所有的属性值**。
  - (学号，课程名称)--> 分数
- **部分函数依赖**：A-->B， 如果A是一个属性组，则B属性值得确定只需要依赖于A属性组中**某一些值**即可。
  - (学号，课程名称)--> 姓名
- **传递函数依赖**：A-->B, B -- >C . 如果通过A属性(属性组)的值，可以确定唯一B属性的值，在通过B属性（属性组）的值可以确定唯一C属性的值，则称 C 传递函数依赖于A。
  - 学号-->系名，系名-->系主任
- **码**：如果在一张表中，一个属性或属性组，被其他所有属性所**完全依赖**，则称这个属性(属性组)为该表的码。
  - 该表中码为：（学号，课程名称）
  - **主属性**：码属性组中的所有属性。
  - **非主属性**：除过码属性组的属性

