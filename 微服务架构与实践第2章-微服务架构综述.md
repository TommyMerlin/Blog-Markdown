---
title: 微服务架构与实践 第2章-微服务架构综述
date: 2020-01-10 20:05:51
tags:
- 微服务
categories:
- 微服务
- 微服务读书笔记
---

## 1微服务架构概述

**微服务定义**(Martin Fowler)：微服务架构为一种架构模式，提倡将单一应用划分成**一组小的服务**，服务之间互相协调、互相配合。每个服务运行在**独立进程**中，服务间沟通采用**轻量级通信机制**。每个服务围绕具体业务构建，可**独立部署**。

### 1.1 “微”的定义

- 代码行数：×
- 重写时间：×
- **团队共识**
  - 业务独立性
  - 团队自主性：人数≤10，全功能团队。

<!-- more -->

### 1.2 单一职责

- **高内聚，低耦合。**

- **单一职责原则(SRP)**：一个对象只能有一个发生变化的原因。若一个对象可被多个原因改变，则说明该对象承担了多个职责。

### 1.3 轻量级通信

**轻量级通信**：语言无关、平台无关的交互方式。

### 1.4 独立性

在应用交付过程中，开发、测试以及部署的独立。

<img src="https://aliyun-oss-coderhuye.oss-cn-hangzhou.aliyuncs.com/blog/2021-06-19-%E7%8B%AC%E7%AB%8B%E6%80%A7-829dd3.png" alt="独立性" width="60%" />

### 1.4 进程隔离

**单块架构**：对应用进行部署时，需先停掉当前运行应用，部署完成后在重新启动，无法做到独立部署。

**微服务架构**：每个服务均为高度自治的独立业务实体，能很容易地部署到不同的主机上。

<img src="https://aliyun-oss-coderhuye.oss-cn-hangzhou.aliyuncs.com/blog/2021-06-19-%E8%BF%9B%E7%A8%8B%E9%9A%94%E7%A6%BB-288027.png" alt="进程隔离" width="60%" />

## 2.微服务架构与SOA

### 2.1 SOA概述

**SOA**：对于复杂系统，按照不同的、可重用的粒度划分，将功能相关的一组功能提供者组织在一起为用户提供服务。

### 2.2 微服务和SOA

| SOA实现                          | 微服务架构实现                   |
| :------------------------------- | :------------------------------- |
| 企业级，自顶向下开展实施         | 团队级，自底向上开展实施         |
| 服务由多个子系统组成，粒度大     | 一个系统被拆分成多个服务，粒度细 |
| 企业服务总线，集中式的服务架构   | 无集中式总线，松散的服务架构     |
| 集成方式复杂（ESB/WS/SOAP）      | 集成方式简单（HTTP/REST/JSON）   |
| 单块架构系统，相互依赖，部署复杂 | 服务能独立部署                   |

**微服务是SOA的子集**

## 3.微服务的本质

微服务本质特征：

- 服务作为组件
  - 以松散的服务方式，构建**可独立化部署**的模块化应用
  - 组件之间定义了清晰的、**语言和平台无关**的接口
  - 分布式调用比进程内调用**更耗时间**，严重依赖网络可靠性与稳定性
- 围绕业务组织团队
  - 以业务为核心，按业务能力组织团队，团队成员具有多样性的技能
- 关注产品而非项目
  - 采用产品模式构建，团队负责服务的整个生命周期
- 技术多样性
  - 针对不同业务选取合适的技术方案
  - 易在系统上尝试新的技术和解决方案
- 业务数据独立
  - 服务**自主管理**其相关的业务数据
- 基础设施自动化
  - 部署与运维成本随服务增多呈指数级增长
  - 对**持续交付**和**部署流水线**要求较高
- 演进式架构
  - 能够不断调整软件的架构，不断演进

## 4.微服务并非万能

微服务实施过程中，需考虑如下因素：

- 分布式系统的复杂度
  - 性能
  - 可靠性
  - 异步
  - 数据一致性
  - 工具
- 运维成本
  - 配置
  - 部署
  - 监控与告警
  - 日志收集
- 部署自动化
- DevOps与组织架构
  - 按需调整组织架构，构建全功能团队
- 服务间依赖测试
- 服务间依赖管理